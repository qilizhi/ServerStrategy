<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<div class="tpl-content-wrapper">
	<div class="tpl-content-page-title" th:text="#{views.server.overview.overViewList}">服务器总览列表</div>
	<ol class="am-breadcrumb">
		<li><a href="#" class="am-icon-home" th:text="#{views.server.overview.serverManagement}" >服务器管理</a></li>
		<li th:text="#{views.server.overview.overViewList}"><!-- <a th:href="@{~/server/overview}"  >服务器总览列表</a> --></li>
		<!--    <li><a href="#" class="am-icon-home">首页</a></li>
                <li><a href="#">Amaze UI CSS</a></li>
                <li class="am-active">文字列表</li> -->
	</ol>
	<div class="tpl-portlet-components">
		<div class="portlet-title">
			<div class="caption font-green bold">
				<span class="am-icon-table" th:text="#{views.server.overview.list}">列表</span> 
			</div>
			<!-- 	<div class="tpl-portlet-input tpl-fz-ml">
				<div class="portlet-input input-small input-inline">
					<div class="input-icon right">
						<i class="am-icon-search"></i> <input type="text"
							class="form-control form-control-solid" placeholder="搜索..." />
					</div>
				</div>
			</div> -->


		</div>
		<div class="tpl-block">
			<div class="am-g">
				<div class="am-u-sm-12 am-u-md-6">
					<div class="am-btn-toolbar">
						<div class="am-btn-group am-btn-group-xs">
							<button type="button" th:href="@{~/serverType/saveOrUpdate}"
								class="am-btn am-btn-default am-btn-success _list-add" >
								<span class="am-icon-plus" th:text="#{views.server.overview.add}" > 新增</span>
							</button>
							<!-- 	<button type="button"
								class="am-btn am-btn-default am-btn-secondary">
								<span class="am-icon-save"></span> 保存
							</button>
							<button type="button"
								class="am-btn am-btn-default am-btn-warning">
								<span class="am-icon-archive"></span> 审核
							</button>
							<button type="button" class="am-btn am-btn-default am-btn-danger">
								<span class="am-icon-trash-o"></span> 删除
							</button> -->
						</div>
					</div>
				</div>
				<!-- 	<div class="am-u-sm-12 am-u-md-3">
					<div class="am-form-group">
						<select data-am-selected="{btnSize: 'sm'}">
							<option value="option1">所有类别</option>
							<option value="option2">IT业界</option>
							<option value="option3">数码产品</option>
							<option value="option3">笔记本电脑</option>
							<option value="option3">平板电脑</option>
							<option value="option3">只能手机</option>
							<option value="option3">超极本</option>
						</select>
					</div> -->
			</div>
			<!-- 		<div class="am-u-sm-12 am-u-md-3">
					<div class="am-input-group am-input-group-sm">
						<input type="text" class="am-form-field" /> <span
							class="am-input-group-btn">
							<button
								class="am-btn  am-btn-default am-btn-success tpl-am-btn-success am-icon-search"
								type="button"></button>
						</span>

					</div>
				</div> -->
		</div>
		<div class="am-g">
			<div class="am-u-sm-12">
				<form class="am-form">
					<table class="am-table am-table-striped am-table-hover table-main">
						<thead>
							<tr>
								<!-- <th class="table-check">
									<input type="checkbox" />
									</th> -->
								<th class="table-id" th:text="#{views.server.overview.NO}">编号</th>
								<th class="table-title" th:text="#{views.server.overview.type}" >服务器类型</th>
								<th class="table-title" th:text="#{views.server.overview.total}">总数</th>
								<th class="table-type" th:text="#{views.server.overview.start}">启用</th>
								<th class="table-author am-hide-sm-only" th:text="#{views.server.overview.stop}">停用</th>
								<th class="table-set" th:text="#{views.server.overview.operation}">操作</th>

							</tr>
						</thead>
						<tbody>
							<tr th:each="obj,iterStat:${pageList.getContent()}">
								<!-- <td>
									<input type="checkbox" />
									</td> -->
								<td th:text="${iterStat.count}"></td>
								<td th:text="${obj.name}">
									<!-- <a href="#">Business management</a> -->
								</td>
								<td ><a th:href="@{~/server/list(type.id=${obj.id})}" th:text="${obj.total}" >总数</a></td>
								<td ><a th:href="@{~/server/list(status=1,type.id=${obj.id})}" th:text="${obj.start}" class="am-text-success">正常</a></td>
								<td ><a th:href="@{~/server/list(status=0,type.id=${obj.id})}" th:text="${obj.stop}" class="am-text-danger">停用</a></td>
								<td>
									<div class="am-btn-toolbar">
										<div class="am-btn-group am-btn-group-xs">
											<button th:name="${obj.name}" th:id="${obj.id}" th:href="@{~/serverType/saveOrUpdate}" type="button"
												class="am-btn am-btn-default am-btn-xs am-text-secondary _list-edit">
												<span class="am-icon-pencil-square-o" th:text="#{views.server.overview.edit}"> 编辑</span>
											</button>
											<!-- 	<button  type="button"
													class="am-btn am-btn-default am-btn-xs am-hide-sm-only">
													<span class="am-icon-copy"></span> 复制
												</button> -->
											<button th:href="@{'~/serverType/del/'+${obj.id}}"
												class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only list-del">
												<span class="am-icon-trash-o" th:text="#{views.server.overview.del}"> 删除</span>
											</button>
										</div>
									</div>
								</td>
							</tr>

						</tbody>
					</table>
					<div
						th:replace="layout/pagination::page(${pageList},${'~/serverType/list'})"></div>
					<hr />

				</form>
			</div>

		</div>
	</div>
	<div class="am-modal am-modal-prompt" tabindex="-1" id="my-prompt">
		<div class="am-modal-dialog">
			<div class="am-modal-hd" th:text="#{views.server.overview.form}">表单</div>
			<div class="am-modal-bd">
				<div class="am-popup-bd">
					<label for="user-phone" class="am-u-sm-3 am-form-label" th:text="#{views.server.overview.typeName}">类型名字:
					</label>
					<div class="am-u-md-6 am-u-end">
						<input type="hidden" value="" name="id"/> 
						<input type="text" id="user-phone"
							name="name" placeholder="输入类型名字/type" />
					</div>
					<small id="tip" style="color:red;display: none" th:text="#{views.server.overview.typeNameNull}">名字不能为空！</small>
				</div>


			</div>
			<div class="am-modal-footer">
				<span class="am-modal-btn" data-am-modal-cancel="" th:text="#{views.server.overview.cancel}">取消</span> <span
					class="am-modal-btn" data-am-modal-confirm="" th:text="#{views.server.overview.submit}">提交</span>
			</div>
		</div>
	</div>
</div>
<script th:inline="javascript">
/* <[[ */
   
	$(function() {
		var listAdd=$("._list-add");
		var modalO=$("#my-prompt");
		var listEdit=$("._list-edit");
		listEdit.on("click", function(e) {
			modalO.find(".am-modal-hd").text([[#{views.server.overview.edit}]]);
			var url = $(this).attr("href");
			var id = $(this).attr("id");
			var name = $(this).attr("name");
			modalO.find(":input[name='name']").val(name);
			modalO.find(":input[name='id']").val(id);
			modalO.modal({
				relatedTarget : this,
				closeOnConfirm:false,
				closeOnCancel:false,
				onConfirm : function(e) {
				var name=modalO.find(":input[name='name']").val();
				var id=modalO.find(":input[name='id']").val();
				if(!name){
			    	 //comm.showMsg("名字不能为空！");
			    	 $("#tip").css("display","block");
					return ;
			     }else{
				$.post(url,{name:name,id:id},function(result){
					if (result.code == "success") {
						// $this.alert("提示","删除操作成功");
						setTimeout(function() {
							window.location.href = window.location.href;
						}, 1000);
					} else if (result.code == "fail") {
						$this.alert([[#{operation.tip}]], [[#{operation.failMsg}]]);
					}
				});
				modalO.find(":input[name='name']").val("");
				modalO.find(":input[name='id']").val("");
				 $("#tip").css("display","none");
				 modalO.modal("close");
			     }
				},
				onCancel : function(e) {
					//console.log(e);
					modalO.find(":input[name='name']").val("");
					modalO.find(":input[name='id']").val("");
					 $("#tip").css("display","none");
					 modalO.modal("close");
				}
			});
			
			
		});
		listAdd.on("click", function() {
			modalO.find(".am-modal-hd").text([[#{views.server.overview.add}]]);
			modalO.modal({
				relatedTarget : this,
				closeOnConfirm:false,
				closeOnCancel:false,
				onConfirm : function(e) {
				var name=modalO.find(":input[name='name']").val();
				var id=modalO.find(":input[name='id']").val();
				//console.log(modalO.find(".m-modal-hd"));
				if(!name){
			    	 //comm.showMsg("名字不能为空！");
			    	 $("#tip").css("display","block");
					return ;
			     }else{
				var url = listAdd.attr("href");
				$.post(url,{name:name,id:id},function(result){
					if (result.code == "success") {
						// $this.alert("提示","删除操作成功");
						setTimeout(function() {
							window.location.href = window.location.href;
						}, 1000);
					} else if (result.code == "fail") {
						$this.alert([[#{operation.tip}]],[[#{operation.failMsg}]]);
					}
				});
				 modalO.modal("close");
				 $("#tip").css("display","none");
				}
				},
				onCancel : function(e) {
					//console.log(e);
					 modalO.modal("close");
					 $("#tip").css("display","none");
				}
			});
		});
	});
	/* ]]> */
</script>

</html>
